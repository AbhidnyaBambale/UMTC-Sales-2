<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Return Portal - Submit & Track Returns</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.2em;
        }

        .customer-info {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .customer-details {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
        }

        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 500;
            border: none;
            background: transparent;
            color: #666;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
        }

        .nav-tab:hover:not(.active) {
            background: #f8f9fa;
            color: #4facfe;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.08);
            margin-bottom: 20px;
            border-left: 4px solid #4facfe;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .form-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }

        .form-section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e2e8f0;
        }

        .form-section:last-child {
            border-bottom: none;
        }

        .form-section h3 {
            color: #2d3748;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2d3748;
        }

        .required {
            color: #e53e3e;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .file-upload {
            border: 2px dashed #cbd5e0;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            border-color: #4facfe;
            background: #f7fafc;
        }

        .file-upload.dragover {
            border-color: #4facfe;
            background: #ebf8ff;
        }

        .file-list {
            margin-top: 15px;
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            margin-bottom: 8px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
            font-size: 16px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
            padding: 6px 12px;
            font-size: 14px;
        }

        .status-timeline {
            position: relative;
            padding-left: 30px;
        }

        .status-timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            height: 100%;
            width: 2px;
            background: #e2e8f0;
        }

        .status-step {
            position: relative;
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .status-step::before {
            content: '';
            position: absolute;
            left: -25px;
            top: 25px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #cbd5e0;
        }

        .status-step.completed::before {
            background: #28a745;
        }

        .status-step.current::before {
            background: #4facfe;
            animation: pulse 2s infinite;
        }

        .status-step.current {
            border-left: 3px solid #4facfe;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .return-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-card {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .summary-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .data-table th, .data-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2d3748;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 500;
        }

        .status-submitted {
            background: #bee3f8;
            color: #2c5282;
        }

        .status-review {
            background: #fef3c7;
            color: #92400e;
        }

        .status-approved {
            background: #d1fae5;
            color: #065f46;
        }

        .status-rejected {
            background: #fee2e2;
            color: #991b1b;
        }

        .status-completed {
            background: #e6fffa;
            color: #234e52;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border-left: 4px solid #10b981;
        }

        .alert-info {
            background: #dbeafe;
            color: #1e40af;
            border-left: 4px solid #3b82f6;
        }

        .alert-warning {
            background: #fef3c7;
            color: #92400e;
            border-left: 4px solid #f59e0b;
        }

        .purchase-lookup {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .search-result {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .item-details {
            display: grid;
            grid-template-columns: 100px 1fr;
            gap: 15px;
            align-items: start;
        }

        .item-image {
            width: 100px;
            height: 100px;
            background: #f0f0f0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close-modal {
            float: right;
            font-size: 24px;
            cursor: pointer;
            color: #6c757d;
        }

        .help-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .faq-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e2e8f0;
        }

        .faq-item:last-child {
            border-bottom: none;
        }

        .faq-question {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .faq-answer {
            color: #4a5568;
            display: none;
            padding-left: 20px;
        }

        .faq-answer.show {
            display: block;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .return-summary {
                grid-template-columns: 1fr;
            }
            
            .customer-info {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📦 Return Portal</h1>
            <p>Submit and track your return requests easily</p>
        </div>

        <div class="customer-info">
            <div class="customer-details">
                <div class="avatar">SJ</div>
                <div>
                    <h3>Welcome back, Sarah Johnson</h3>
                    <p style="color: #666; margin-top: 5px;">Customer since 2022 • Premium Member</p>
                </div>
            </div>
            <div>
                <button class="btn btn-secondary" onclick="logout()">Sign Out</button>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('new-return')">📝 New Return</button>
            <button class="nav-tab" onclick="switchTab('my-returns')">📋 My Returns</button>
            <button class="nav-tab" onclick="switchTab('track-return')">🔍 Track Return</button>
            <button class="nav-tab" onclick="switchTab('help')">❓ Help & FAQ</button>
        </div>

        <!-- New Return Tab -->
        <div id="new-return" class="tab-content active">
            <div class="form-container">
                <h2>📝 Submit a New Return Request</h2>
                
                <!-- Step 1: Find Your Purchase -->
                <div class="form-section">
                    <h3>🔍 Step 1: Find Your Purchase</h3>
                    <div class="purchase-lookup">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="orderNumber">Order Number</label>
                                <input type="text" id="orderNumber" placeholder="e.g., ORD-2025-001234" oninput="searchOrder()">
                            </div>
                            <div class="form-group">
                                <label for="purchaseEmail">Email Used for Purchase</label>
                                <input type="email" id="purchaseEmail" placeholder="your.email@example.com" value="sarah.johnson@email.com">
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="lookupPurchase()">🔍 Find My Purchase</button>
                        
                        <div id="purchaseResults" style="display: none;">
                            <div class="search-result">
                                <div class="alert alert-success">
                                    ✅ Purchase found! Select the item(s) you want to return below.
                                </div>
                                <div class="item-details">
                                    <div class="item-image">📱</div>
                                    <div>
                                        <h4>iPhone 15 Pro 128GB - Natural Titanium</h4>
                                        <p><strong>Order:</strong> ORD-2025-001234</p>
                                        <p><strong>Purchase Date:</strong> September 15, 2025</p>
                                        <p><strong>Price:</strong> $999.00</p>
                                        <p><strong>Salesperson:</strong> Mike Chen</p>
                                        <label style="margin-top: 10px;">
                                            <input type="checkbox" onchange="selectItemForReturn(this)"> Select for return
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Return Details -->
                <div class="form-section" id="returnDetailsSection" style="display: none;">
                    <h3>📋 Step 2: Return Details</h3>
                    
                    <div class="form-group">
                        <label for="returnReason">Reason for Return <span class="required">*</span></label>
                        <select id="returnReason" required onchange="showReasonDetails()">
                            <option value="">Please select a reason</option>
                            <option value="defective">Product is defective or damaged</option>
                            <option value="wrong-item">Wrong item was shipped</option>
                            <option value="wrong-size">Wrong size or color</option>
                            <option value="not-described">Item not as described</option>
                            <option value="changed-mind">Changed my mind</option>
                            <option value="duplicate">Duplicate order</option>
                            <option value="other">Other (please specify)</option>
                        </select>
                    </div>

                    <div id="reasonDetails" style="display: none;">
                        <div class="form-group">
                            <label for="detailedReason">Please provide more details</label>
                            <textarea id="detailedReason" rows="4" placeholder="Describe the issue in detail..."></textarea>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="itemCondition">Current condition of the item</label>
                        <select id="itemCondition" required>
                            <option value="">Select condition</option>
                            <option value="like-new">Like new (original packaging)</option>
                            <option value="good">Good (minor wear)</option>
                            <option value="fair">Fair (visible wear but functional)</option>
                            <option value="poor">Poor (damaged/defective)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="hasAllAccessories">Do you have all original accessories and packaging?</label>
                        <select id="hasAllAccessories" required>
                            <option value="">Select option</option>
                            <option value="yes">Yes, I have everything</option>
                            <option value="partial">I have most items</option>
                            <option value="no">No, some items are missing</option>
                        </select>
                    </div>
                </div>

                <!-- Step 3: Photo Upload -->
                <div class="form-section" id="photoUploadSection" style="display: none;">
                    <h3>📷 Step 3: Upload Photos (Optional but Recommended)</h3>
                    <p style="margin-bottom: 15px; color: #666;">Photos help us process your return faster and more accurately.</p>
                    
                    <div class="file-upload" onclick="document.getElementById('fileInput').click()" ondrop="handleFileDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                        <div style="font-size: 48px; margin-bottom: 15px;">📁</div>
                        <p><strong>Click to upload or drag and drop</strong></p>
                        <p style="font-size: 14px; color: #666; margin-top: 10px;">
                            Upload photos of the item, packaging, and any defects<br>
                            Supported formats: JPG, PNG, HEIC (Max 10MB each)
                        </p>
                        <input type="file" id="fileInput" multiple accept="image/*" style="display: none;" onchange="handleFileSelect(event)">
                    </div>

                    <div id="fileList" class="file-list" style="display: none;">
                        <!-- Uploaded files will be shown here -->
                    </div>
                </div>

                <!-- Step 4: Return Preference -->
                <div class="form-section" id="returnPreferenceSection" style="display: none;">
                    <h3>🔄 Step 4: Return Preference</h3>
                    
                    <div class="form-group">
                        <label for="returnMethod">What would you like us to do?</label>
                        <select id="returnMethod" required onchange="showReturnOptions()">
                            <option value="">Select your preference</option>
                            <option value="refund">Full refund to original payment method</option>
                            <option value="exchange">Exchange for different size/color</option>
                            <option value="store-credit">Store credit for future purchase</option>
                            <option value="replacement">Replacement (same item)</option>
                        </select>
                    </div>

                    <div id="returnOptions" style="display: none;">
                        <!-- Dynamic options based on return method will appear here -->
                    </div>

                    <div class="form-group">
                        <label for="returnShipping">Return shipping method</label>
                        <select id="returnShipping" required>
                            <option value="">Select shipping method</option>
                            <option value="prepaid-label">Free prepaid shipping label (3-5 days)</option>
                            <option value="store-dropoff">Drop off at store location</option>
                            <option value="pickup">Schedule pickup ($5 fee)</option>
                        </select>
                    </div>
                </div>

                <!-- Submit Section -->
                <div class="form-section" id="submitSection" style="display: none;">
                    <div class="alert alert-info">
                        📋 Please review your return request details before submitting.
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px;">
                        <button class="btn btn-primary" onclick="submitReturn()" style="font-size: 18px; padding: 15px 40px;">
                            📤 Submit Return Request
                        </button>
                        <button class="btn btn-secondary" onclick="resetForm()">↩️ Start Over</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- My Returns Tab -->
        <div id="my-returns" class="tab-content">
            <div class="return-summary">
                <div class="summary-card">
                    <div class="summary-value">3</div>
                    <div>Total Returns</div>
                </div>
                <div class="summary-card">
                    <div class="summary-value">1</div>
                    <div>In Progress</div>
                </div>
                <div class="summary-card">
                    <div class="summary-value">2</div>
                    <div>Completed</div>
                </div>
                <div class="summary-card">
                    <div class="summary-value">$1,298</div>
                    <div>Total Refunded</div>
                </div>
            </div>

            <div class="card">
                <h3>📋 Your Return History</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Return ID</th>
                            <th>Item</th>
                            <th>Submitted</th>
                            <th>Status</th>
                            <th>Refund Amount</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>RET-2025-0156</td>
                            <td>iPhone 15 Pro 128GB</td>
                            <td>Sep 22, 2025</td>
                            <td><span class="status-badge status-review">Under Review</span></td>
                            <td>$999.00</td>
                            <td><button class="btn btn-primary" onclick="viewReturnDetails('RET-2025-0156')">View Details</button></td>
                        </tr>
                        <tr>
                            <td>RET-2025-0098</td>
                            <td>MacBook Air M3</td>
                            <td>Aug 15, 2025</td>
                            <td><span class="status-badge status-completed">Completed</span></td>
                            <td>$1,199.00</td>
                            <td><button class="btn btn-primary" onclick="viewReturnDetails('RET-2025-0098')">View Details</button></td>
                        </tr>
                        <tr>
                            <td>RET-2025-0041</td>
                            <td>AirPods Pro 2nd Gen</td>
                            <td>Jul 8, 2025</td>
                            <td><span class="status-badge status-completed">Completed</span></td>
                            <td>$249.00</td>
                            <td><button class="btn btn-primary" onclick="viewReturnDetails('RET-2025-0041')">View Details</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Track Return Tab -->
        <div id="track-return" class="tab-content">
            <div class="form-container">
                <h3>🔍 Track Your Return</h3>
                <div style="display: grid; grid-template-columns: 1fr auto; gap: 20px; margin-bottom: 30px;">
                    <input type="text" id="trackingInput" placeholder="Enter your return ID (e.g., RET-2025-0156)" style="padding: 15px; font-size: 16px; border: 2px solid #e2e8f0; border-radius: 8px;">
                    <button class="btn btn-primary" onclick="trackReturn()">🔍 Track Return</button>
                </div>

                <div id="trackingResults" style="display: none;">
                    <div class="card">
                        <h4>Return Status: RET-2025-0156</h4>
                        <p><strong>Item:</strong> iPhone 15 Pro 128GB - Natural Titanium</p>
                        <p><strong>Submitted:</strong> September 22, 2025</p>
                        <p><strong>Expected Resolution:</strong> September 28, 2025</p>
                        
                        <div class="status-timeline">
                            <div class="status-step completed">
                                <h5>📝 Return Request Submitted</h5>
                                <p><strong>September 22, 2025 - 2:15 PM</strong></p>
                                <p>Your return request has been received and is being processed.</p>
                            </div>
                            <div class="status-step completed">
                                <h5>✅ Return Approved</h5>
                                <p><strong>September 22, 2025 - 4:30 PM</strong></p>
                                <p>Your return has been approved. Shipping label has been generated.</p>
                            </div>
                            <div class="status-step completed">
                                <h5>📦 Return Shipped</h5>
                                <p><strong>September 23, 2025 - 10:00 AM</strong></p>
                                <p>Package tracking: <strong>1Z999AA1234567890</strong></p>
                            </div>
                            <div class="status-step current">
                                <h5>🔍 Item Inspection</h5>
                                <p><strong>September 25, 2025 - 9:15 AM</strong></p>
                                <p>Your returned item is currently being inspected by our team.</p>
                                <div class="alert alert-info" style="margin-top: 10px;">
                                    🤖 AI verification shows 98% confidence match with original item
                                </div>
                            </div>
                            <div class="status-step">
                                <h5>💰 Refund Processing</h5>
                                <p><strong>Estimated: September 27, 2025</strong></p>
                                <p>Refund will be processed to your original payment method.</p>
                            </div>
                            <div class="status-step">
                                <h5>✅ Return Complete</h5>
                                <p><strong>Estimated: September 28, 2025</strong></p>
                                <p>You will receive a confirmation email when completed.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Help & FAQ Tab -->
        <div id="help" class="tab-content">
            <div class="card">
                <h3>❓ Frequently Asked Questions</h3>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>▶️</span> How long do I have to return an item?
                    </div>
                    <div class="faq-answer">
                        You have 30 days from the purchase date to initiate a return for most items. Some categories like electronics have a 14-day return window. Check your receipt or order confirmation for specific details.
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>▶️</span> What condition should my item be in for return?
                    </div>
                    <div class="faq-answer">
                        Items should be in their original condition with all accessories and packaging when possible. We accept returns in various conditions, but this may affect your refund amount.
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>▶️</span> How long does the return process take?
                    </div>
                    <div class="faq-answer">
                        The typical return process takes 5-7 business days from when we receive your item. AI-powered verification helps us process returns faster with an average processing time of 2.4 days.
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>▶️</span> Will I be charged for return shipping?
                    </div>
                    <div class="faq-answer">
                        We provide free prepaid return shipping labels for defective items and our errors. For other returns, you can choose free standard shipping (3-5 days) or expedited options for a fee.
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>▶️</span> Can I exchange an item instead of returning it?
                    </div>
                    <div class="faq-answer">
                        Yes! You can choose to exchange for a different size, color, or model during the return process. We'll help you find the perfect replacement.
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>▶️</span> What if my return is rejected?
                    </div>
                    <div class="faq-answer">
                        If your return doesn't meet our policy requirements, we'll contact you with options including returning the item to you or offering a partial refund. You can also appeal the decision.
                    </div>
                </div>
            </div>

            <div class="help-section">
                <h4>📞 Need More Help?</h4>
                <p>If you can't find the answer to your question, our customer service team is here to help:</p>
                <div style="margin-top: 15px;">
                    <p><strong>📞 Phone:</strong> 1-800-RETURNS (1-800-738-8767)</p>
                    <p><strong>💬 Chat:</strong> Available 24/7 on our website</p>
                    <p><strong>📧 Email:</strong> returns@company.com</p>
                    <p><strong>🕒 Hours:</strong> Monday-Friday 8AM-8PM, Weekend 10AM-6PM</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Return Details -->
    <div id="returnModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div id="modalContent">
                <!-- Modal content will be populated here -->
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 4;
        let uploadedFiles = [];

        function switchTab(tabId) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            const navTabs = document.querySelectorAll('.nav-tab');
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        function lookupPurchase() {
            const orderNumber = document.getElementById('orderNumber').value;
            const email = document.getElementById('purchaseEmail').value;
            
            if (!orderNumber || !email) {
                alert('Please enter both order number and email address');
                return;
            }
            
            // Simulate API call
            setTimeout(() => {
                document.getElementById('purchaseResults').style.display = 'block';
            }, 1000);
        }

        function selectItemForReturn(checkbox) {
            if (checkbox.checked) {
                document.getElementById('returnDetailsSection').style.display = 'block';
                scrollToSection('returnDetailsSection');
            } else {
                document.getElementById('returnDetailsSection').style.display = 'none';
                hideAllSections();
            }
        }

        function showReasonDetails() {
            const reason = document.getElementById('returnReason').value;
            const detailsSection = document.getElementById('reasonDetails');
            
            if (reason === 'other' || reason === 'defective' || reason === 'not-described') {
                detailsSection.style.display = 'block';
            } else {
                detailsSection.style.display = 'none';
            }
            
            if (reason) {
                document.getElementById('photoUploadSection').style.display = 'block';
                scrollToSection('photoUploadSection');
            }
        }

        function handleFileSelect(event) {
            const files = Array.from(event.target.files);
            addFiles(files);
        }

        function handleFileDrop(event) {
            event.preventDefault();
            event.stopPropagation();
            const fileUpload = event.target.closest('.file-upload');
            fileUpload.classList.remove('dragover');
            
            const files = Array.from(event.dataTransfer.files);
            addFiles(files);
        }

        function handleDragOver(event) {
            event.preventDefault();
            event.target.closest('.file-upload').classList.add('dragover');
        }

        function handleDragLeave(event) {
            event.target.closest('.file-upload').classList.remove('dragover');
        }

        function addFiles(files) {
            files.forEach(file => {
                if (file.type.startsWith('image/') && file.size <= 10 * 1024 * 1024) {
                    uploadedFiles.push(file);
                } else {
                    alert(`File ${file.name} is not supported or exceeds 10MB limit`);
                }
            });
            
            updateFileList();
            
            if (uploadedFiles.length > 0) {
                document.getElementById('returnPreferenceSection').style.display = 'block';
                scrollToSection('returnPreferenceSection');
            }
        }

        function updateFileList() {
            const fileList = document.getElementById('fileList');
            
            if (uploadedFiles.length > 0) {
                fileList.style.display = 'block';
                fileList.innerHTML = uploadedFiles.map((file, index) => `
                    <div class="file-item">
                        <span>📷 ${file.name} (${(file.size / 1024).toFixed(1)} KB)</span>
                        <button class="btn btn-danger" onclick="removeFile(${index})">Remove</button>
                    </div>
                `).join('');
            } else {
                fileList.style.display = 'none';
            }
        }

        function removeFile(index) {
            uploadedFiles.splice(index, 1);
            updateFileList();
        }

        function showReturnOptions() {
            const method = document.getElementById('returnMethod').value;
            const optionsDiv = document.getElementById('returnOptions');
            
            let optionsHtml = '';
            
            switch(method) {
                case 'exchange':
                    optionsHtml = `
                        <div class="form-group">
                            <label>What would you like instead?</label>
                            <select required>
                                <option value="">Choose replacement</option>
                                <option value="different-color">Same item, different color</option>
                                <option value="different-size">Same item, different size</option>
                                <option value="different-model">Different model</option>
                            </select>
                        </div>
                    `;
                    break;
                case 'replacement':
                    optionsHtml = `
                        <div class="alert alert-info">
                            We'll send you an identical replacement item once we receive your return.
                        </div>
                    `;
                    break;
            }
            
            optionsDiv.innerHTML = optionsHtml;
            optionsDiv.style.display = method ? 'block' : 'none';
            
            if (method) {
                document.getElementById('submitSection').style.display = 'block';
                scrollToSection('submitSection');
            }
        }

        function submitReturn() {
            // Validate required fields
            const requiredFields = ['returnReason', 'itemCondition', 'hasAllAccessories', 'returnMethod', 'returnShipping'];
            let isValid = true;
            
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (!field.value) {
                    field.style.borderColor = '#e53e3e';
                    isValid = false;
                } else {
                    field.style.borderColor = '#e2e8f0';
                }
            });
            
            if (!isValid) {
                alert('Please fill in all required fields');
                return;
            }
            
            // Generate return ID
            const returnId = 'RET-2025-' + Math.floor(Math.random() * 10000).toString().padStart(4, '0');
            
            // Show success message
            alert(`🎉 Return request submitted successfully!\n\nReturn ID: ${returnId}\n\nYou will receive a confirmation email shortly with your prepaid shipping label.\n\nExpected processing time: 5-7 business days`);
            
            // Reset form
            resetForm();
            
            // Switch to track return tab
            switchTab('track-return');
            document.getElementById('trackingInput').value = returnId;
        }

        function resetForm() {
            const form = document.querySelector('#new-return');
            const inputs = form.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                input.value = '';
                input.style.borderColor = '#e2e8f0';
            });
            
            uploadedFiles = [];
            updateFileList();
            hideAllSections();
            document.getElementById('purchaseResults').style.display = 'none';
        }

        function hideAllSections() {
            const sections = ['returnDetailsSection', 'photoUploadSection', 'returnPreferenceSection', 'submitSection'];
            sections.forEach(sectionId => {
                document.getElementById(sectionId).style.display = 'none';
            });
        }

        function scrollToSection(sectionId) {
            setTimeout(() => {
                document.getElementById(sectionId).scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }, 100);
        }

        function trackReturn() {
            const returnId = document.getElementById('trackingInput').value;
            
            if (!returnId) {
                alert('Please enter a return ID');
                return;
            }
            
            // Simulate tracking lookup
            document.getElementById('trackingResults').style.display = 'block';
        }

        function viewReturnDetails(returnId) {
            const modal = document.getElementById('returnModal');
            const modalContent = document.getElementById('modalContent');
            
            modalContent.innerHTML = `
                <h3>Return Details: ${returnId}</h3>
                <div style="margin-top: 20px;">
                    <div class="item-details">
                        <div class="item-image">📱</div>
                        <div>
                            <h4>iPhone 15 Pro 128GB - Natural Titanium</h4>
                            <p><strong>Order:</strong> ORD-2025-001234</p>
                            <p><strong>Purchase Date:</strong> September 15, 2025</p>
                            <p><strong>Return Submitted:</strong> September 22, 2025</p>
                            <p><strong>Reason:</strong> Product is defective (screen flickering)</p>
                            <p><strong>Status:</strong> <span class="status-badge status-review">Under Review</span></p>
                        </div>
                    </div>
                    
                    <div class="alert alert-info" style="margin-top: 20px;">
                        <strong>🤖 AI Analysis:</strong> Item verification shows 98% confidence match. Expected approval within 24 hours.
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h4>Uploaded Photos</h4>
                        <div style="display: flex; gap: 10px; margin-top: 10px;">
                            <div style="width: 80px; height: 80px; background: #f0f0f0; border-radius: 4px; display: flex; align-items: center; justify-content: center;">📷</div>
                            <div style="width: 80px; height: 80px; background: #f0f0f0; border-radius: 4px; display: flex; align-items: center; justify-content: center;">📷</div>
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('returnModal').classList.remove('active');
        }

        function toggleFAQ(element) {
            const answer = element.nextElementSibling;
            const arrow = element.querySelector('span');
            
            if (answer.classList.contains('show')) {
                answer.classList.remove('show');
                arrow.textContent = '▶️';
            } else {
                // Close other FAQs
                document.querySelectorAll('.faq-answer.show').forEach(openAnswer => {
                    openAnswer.classList.remove('show');
                    openAnswer.previousElementSibling.querySelector('span').textContent = '▶️';
                });
                
                answer.classList.add('show');
                arrow.textContent = '🔽';
            }
        }

        function logout() {
            if (confirm('Are you sure you want to sign out?')) {
                alert('You have been signed out successfully.');
                // In a real app, this would redirect to login page
            }
        }

        // Auto-save form data to localStorage
        function autoSave() {
            const formData = {};
            const inputs = document.querySelectorAll('#new-return input, #new-return select, #new-return textarea');
            
            inputs.forEach(input => {
                if (input.id) {
                    formData[input.id] = input.value;
                }
            });
            
            localStorage.setItem('returnFormData', JSON.stringify(formData));
        }

        // Load saved form data
        function loadSavedData() {
            const savedData = localStorage.getItem('returnFormData');
            if (savedData) {
                const formData = JSON.parse(savedData);
                Object.keys(formData).forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.value = formData[id];
                    }
                });
            }
        }

        // Initialize auto-save
        document.addEventListener('DOMContentLoaded', () => {
            loadSavedData();
            
            // Add auto-save listeners
            const inputs = document.querySelectorAll('#new-return input, #new-return select, #new-return textarea');
            inputs.forEach(input => {
                input.addEventListener('change', autoSave);
                input.addEventListener('input', autoSave);
            });
        });

        // Search functionality
        function searchOrder() {
            const orderNumber = document.getElementById('orderNumber').value;
            if (orderNumber.length >= 6) {
                // Simulate real-time search
                console.log('Searching for order:', orderNumber);
            }
        }
    </script>
</body>
</html>